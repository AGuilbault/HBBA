# Simple config file to test the parser.
# Not supposed to work on any particular robot configuration.
hbba_conf:

# Find the given file name, add it to the processed files list.
# The file attribute doesn't have to be a full path, it works like
# bash ros utils.
- include: {pkg: "hbba_synth", file: "common.yaml"}

- remap: {from: 'look_at_pose', to: '/face/look_at_pose'}

- resources:
    CPU: 100
    sound: 1

#- behavior:
#    name: stop
#    launch: {pkg: "autonav", path: "stop.launch"}
#    output:
#        - cmd_vel
#    priority: 10

- behavior:
    name: look_at_voice
    launch: {pkg: "jn0_bringup", path: "launch/jn0_bhvr_look_at.launch"}
    input: # Automatically remapped to root.
        - pose: source_pose # The first is what the node listens to, the second its actual remap (to root).
        - second_pose
    output:
        - look_at_pose
    priority: 10

- procmodule:
    name: manyears 
    launch: {pkg: "jn0_bringup", path: "launch/jn0_manyears.launch"}
    input:
        # NOTE: Filter types are ignored for now
        - audio_stream: {type: GenericDivisor}
    output: # Automatically remapped to root.
        - source_pose

- strat:
    name: LocateVoiceFull
    class: LocateVoice
    utility: 100
    costs: {CPU: 100}
    dependencies: {} # utility_min
    modules: 
        - manyears:
            - audio_stream: 1 # Filter level for activation
- strat:
    name: LookAtVoice
    class: LookAtVoice
    utility: 1
    costs: {}
    dependencies: {LocateVoice: 100}
    modules:
        - look_at_voice

# Defines a desire that is automatically added at startup.
- desire:
    id: test_desire
    type: LookAtVoice
    utility: 1
    intensity: 1.0
    params: ""
    security: False

# Overrides a previous behavior priority, useful for included files.
- behavior_priority: {name: 'look_at_voice', value: 50}

# Overrides the default arbitration type for a topic
- arbitration_type: {topic: 'look_at_pose', pkg: 'abtr_priority', type: 'GenericAsync'}

# A motivation module is similar to a proc module, except without filters.
- motivation:
    name: base_motivation
    launch: {pkg: "jn0_demos", path: "launch/base_motivations.launch"}
    # Automatic HBBA remaps (add_desires, remove_desires, ...) (default: true):
    # The actual remaps still have to be declared (see
    # hbba_synth/hbba_cfg/common.yaml)
    auto_hbba_remap: true
    input:
        - sound_pose
    output:
        - person_pose

